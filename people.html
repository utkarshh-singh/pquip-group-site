<!DOCTYPE html>
<html lang="en">
<head>
  <title>People</title>
  <link rel="stylesheet" href="assets/css/people.css" />
</head>

<body>
<div id="site-header"></div>

<main class="container main-content">
  <!-- Stylish intro -->
  <section class="people-intro">
    <p class="people-lede">
      We are a multidisciplinary team of postdocs, PhD and masterâ€™s students, interns, and collaborators,
      primarily based at the National Research Council (NRC) and the University of Ottawa. Together, we 
      bring a wide range of expertise and perspectives to our research.
    </p>
    <header class="people-intro__head">
      <ul class="people-tags" aria-label="Team makeup">
        <li>Postdocs</li>
        <li>PhD</li>
        <li>MSc</li>
        <li>Collaborators</li>
      </ul>
    </header>
  </section>

  <!-- Team grid (unchanged) -->
  <section>
    <div id="people-grid" class="grid people-grid"></div>
  </section>
</main>

<div id="site-footer"></div>

<script src="assets/js/main.js"></script>
<script>
async function loadPeople(){
  const grid = document.getElementById('people-grid');
  try{
    // 1) get the list of member IDs (folder names)
    const ids = await (await fetch('members/manifest.json')).json(); // ["utkarsh","khabat",...]
    // 2) fetch each profile.json in parallel
    const profiles = await Promise.all(ids.map(async id => {
      try{
        const res = await fetch(`members/${encodeURIComponent(id)}/profile.json`);
        if(!res.ok) throw 0;
        const j = await res.json();
        return j;
      }catch{ return null; }
    }));
    // 3) render cards
    grid.innerHTML = profiles.filter(Boolean).map(m => `
      <a class="person" href="member.html?id=${encodeURIComponent(m.id)}" title="View ${m.name}">
        <img src="${m.photo || 'assets/img/person-placeholder.svg'}" alt="${m.name}">
        <h3>${m.name}</h3>
        <p>${m.role || ''}</p>
      </a>
    `).join('');
  }catch(e){
    grid.innerHTML = '<p>Failed to load members.</p>';
    console.error(e);
  }
}
loadPeople();
</script>

</body>
</html>
